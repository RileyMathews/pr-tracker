// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: queries.sql

package gen

import (
	"context"
	"database/sql"
)

const getPullRequestByNumber = `-- name: GetPullRequestByNumber :one
SELECT
  number,
  title,
  repository,
  author,
  draft,
  created_at_unix,
  updated_at_unix,
  ci_status,
  last_comment_unix,
  last_commit_unix,
  last_acknowledged_unix
FROM pull_requests
WHERE number = ?
LIMIT 1
`

type GetPullRequestByNumberRow struct {
	Number               int64         `json:"number"`
	Title                string        `json:"title"`
	Repository           string        `json:"repository"`
	Author               string        `json:"author"`
	Draft                int64         `json:"draft"`
	CreatedAtUnix        int64         `json:"created_at_unix"`
	UpdatedAtUnix        int64         `json:"updated_at_unix"`
	CiStatus             int64         `json:"ci_status"`
	LastCommentUnix      int64         `json:"last_comment_unix"`
	LastCommitUnix       int64         `json:"last_commit_unix"`
	LastAcknowledgedUnix sql.NullInt64 `json:"last_acknowledged_unix"`
}

func (q *Queries) GetPullRequestByNumber(ctx context.Context, number int64) (GetPullRequestByNumberRow, error) {
	row := q.db.QueryRowContext(ctx, getPullRequestByNumber, number)
	var i GetPullRequestByNumberRow
	err := row.Scan(
		&i.Number,
		&i.Title,
		&i.Repository,
		&i.Author,
		&i.Draft,
		&i.CreatedAtUnix,
		&i.UpdatedAtUnix,
		&i.CiStatus,
		&i.LastCommentUnix,
		&i.LastCommitUnix,
		&i.LastAcknowledgedUnix,
	)
	return i, err
}

const upsertPullRequest = `-- name: UpsertPullRequest :exec
INSERT INTO pull_requests (
  number,
  title,
  repository,
  author,
  draft,
  created_at_unix,
  updated_at_unix,
  ci_status,
  last_comment_unix,
  last_commit_unix,
  last_acknowledged_unix
) VALUES (
  ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?
)
ON CONFLICT(number) DO UPDATE SET
  title = excluded.title,
  repository = excluded.repository,
  author = excluded.author,
  draft = excluded.draft,
  created_at_unix = excluded.created_at_unix,
  updated_at_unix = excluded.updated_at_unix,
  ci_status = excluded.ci_status,
  last_comment_unix = excluded.last_comment_unix,
  last_commit_unix = excluded.last_commit_unix,
  last_acknowledged_unix = excluded.last_acknowledged_unix
`

type UpsertPullRequestParams struct {
	Number               int64         `json:"number"`
	Title                string        `json:"title"`
	Repository           string        `json:"repository"`
	Author               string        `json:"author"`
	Draft                int64         `json:"draft"`
	CreatedAtUnix        int64         `json:"created_at_unix"`
	UpdatedAtUnix        int64         `json:"updated_at_unix"`
	CiStatus             int64         `json:"ci_status"`
	LastCommentUnix      int64         `json:"last_comment_unix"`
	LastCommitUnix       int64         `json:"last_commit_unix"`
	LastAcknowledgedUnix sql.NullInt64 `json:"last_acknowledged_unix"`
}

func (q *Queries) UpsertPullRequest(ctx context.Context, arg UpsertPullRequestParams) error {
	_, err := q.db.ExecContext(ctx, upsertPullRequest,
		arg.Number,
		arg.Title,
		arg.Repository,
		arg.Author,
		arg.Draft,
		arg.CreatedAtUnix,
		arg.UpdatedAtUnix,
		arg.CiStatus,
		arg.LastCommentUnix,
		arg.LastCommitUnix,
		arg.LastAcknowledgedUnix,
	)
	return err
}
